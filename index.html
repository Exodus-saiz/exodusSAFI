<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safi & Fils</title>
    <link rel="stylesheet" href="./style.css">
    <!-- FIREBASE -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body>
<header>
    <div id="datetime"></div>
</header>

<main>
    <!-- MESSAGE SÉCURITÉ -->
    <div id="access-denied" style="display:none; text-align:center; padding:20px; color:red;">
        Accès refusé. Vous n'êtes pas autorisé.
    </div>

    <!-- MENU -->
    <nav id="main-menu" style="display:none;">
        <button onclick="showSection('stock-section')">Stock</button>
        <button onclick="showSection('vente-section')">Nouvelle Vente</button>
        <button onclick="showSection('dashboard-section')">Tableau de Bord</button>
        <button onclick="showSection('archives-section')">Archives</button>
        <button onclick="showSection('settings-section')">Paramètres</button>
    </nav>

    <!-- STOCK -->
    <section id="stock-section" class="section">
        <h2>Gestion du stock</h2>
        <div class="form-group">
            <label>Marque</label>
            <select id="gaz-type" onchange="updatePoidsStock()"></select>
        </div>
        <div class="form-group">
            <label>Poids</label>
            <select id="gaz-poids"></select>
        </div>
        <div class="form-group">
            <label>Quantité</label>
            <input type="number" id="initial-qty" min="0">
        </div>
        <button onclick="ajouterStock()">Ajouter / Modifier stock</button>
    </section>

    <!-- VENTE -->
    <section id="vente-section" class="section" style="display:none;">
        <h2>Nouvelle vente</h2>
        <div class="form-group">
            <label>Utilisateur</label>
            <select id="vendeur">
                <option>Glorad Saizonou</option>
                <option>Utilisateur 1</option>
            </select>
        </div>
        <div class="form-group">
            <label>Marque</label>
            <select id="vente-gaz-type" onchange="updatePoidsVente()"></select>
        </div>
        <div class="form-group">
            <label>Poids</label>
            <select id="vente-poids" onchange="updatePrix()"></select>
        </div>
        <div class="form-group">
            <label>Prix unitaire (FCFA)</label>
            <input type="text" id="prix-unitaire" readonly>
        </div>
        <div class="form-group">
            <label>Quantité vendue</label>
            <input type="number" id="quantite" min="1" oninput="updateTotal()">
        </div>
        <div class="form-group">
            <label>Total (FCFA)</label>
            <input type="text" id="total" readonly>
        </div>
        <button onclick="enregistrerVente()">Valider la vente</button>
    </section>

    <!-- DASHBOARD -->
    <section id="dashboard-section" class="section" style="display:none;">
        <h2>Tableau de Bord</h2>
        <section>
            <h3>Stock actuel</h3>
            <table>
                <thead>
                    <tr>
                        <th>Marque</th>
                        <th>Poids</th>
                        <th>Qté</th>
                    </tr>
                </thead>
                <tbody id="stock-table"></tbody>
            </table>
        </section>
        <section>
            <h3>Chiffre d'affaires total</h3>
            <p id="chiffre-total">0 FCFA</p>
        </section>
    </section>

    <!-- ARCHIVES -->
    <section id="archives-section" class="section" style="display:none;">
        <h2>Archives</h2>
        <div class="form-group">
            <label>Jour</label>
            <input type="date" id="archive-date" onchange="afficherArchiveJour()">
        </div>
        <div class="form-group">
            <label>Mois</label>
            <input type="month" id="archive-month" onchange="afficherArchiveMois()">
        </div>
        <div class="form-group">
            <label>Année</label>
            <input type="number" id="archive-year" min="2000" max="2100" onchange="afficherArchiveAnnee()">
        </div>
        <table>
            <thead>
                <tr>
                    <th>Heure</th>
                    <th>Utilisateur</th>
                    <th>Marque</th>
                    <th>Poids</th>
                    <th>Quantité</th>
                    <th>Prix unitaire</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody id="archive-table"></tbody>
        </table>
        <p>Total : <span id="archive-total">0 FCFA</span></p>
    </section>

    <!-- PARAMÈTRES -->
    <section id="settings-section" class="section" style="display:none;">
        <h2>Paramètres</h2>
        <button onclick="reinitialiserVentes()">Réinitialiser les ventes</button>
        <button onclick="reinitialiserStock()">Réinitialiser le stock</button>
        <button onclick="reinitialiserTout()">Réinitialiser tout</button>
    </section>

</main>

<footer>
    Site créé par Exodus Saïzonou
</footer>

<script src="./script.js"></script>
</body>
</html>